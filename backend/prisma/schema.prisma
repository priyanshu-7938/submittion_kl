generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider = "postgresql"
  extensions = [vector]
}

model KnowledgeBase {
  id        Int      @id @default(autoincrement())
  content   String
  embedding Unsupported("vector(768)")? 
  createdAt DateTime @default(now()) @map("created_at")

  @@map("knowledge_base")
}

model Session {
  id        String       @id @default(uuid()) // Auto-incrementing primary key
  createdAt DateTime  @default(now()) // Timestamp for session creation
  messages  ChatMessage[] // One-to-many relationship with ChatMessage
}

model ChatMessage {
  id        Int      @id @default(autoincrement()) // Auto-incrementing primary key
  sessionId String      // Foreign key to the Session table
  session   Session  @relation(fields: [sessionId], references: [id]) // Relationship to Session model
  role      Role  // The role of the message ('user' or 'bot')
  content   String   // The content of the message
  createdAt DateTime @default(now()) // Timestamp for message creation
}

enum Role{
    USER
    BOT
}
